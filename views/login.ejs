<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="/css/login.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<style>
    .form-check-inline .form-check-input {
 display: inline-block;
 margin-right: .3125rem;
}

.form-check-inline .form-check-label {
 display: inline-block;
 margin-right: .3125rem;
}
</style>

<body>
    <section>
        <div class="container">
            <div class="user signinBx">
                <div class="imgBx"><img src="/images/faheemmainlogo.png" /></div>
                <div class="formBx">
                    <form action="/login" method="POST">
                        <h2>Sign In</h2>
                        <p id="errorMessage" style="color: red;"></p>
                        <input type="text" id="username" name="username" placeholder="Username" />
                        <input type="password" id="password" name="password"  placeholder="Password" />
                        
                        <input type="submit" name="" value="Login" />
                        <p class="signup">
                            Don't have an account ?
                            <a href="#" onclick="toggleForm();">Sign Up.</a>
                        </p>
                       
                    </form>
                </div>
            </div>
            <div class="user signupBx">
                <div class="formBx">
                    <form action="/register" name="reg" method="POST">
                        <h2>Create an account</h2>
                        <input type="text" id="username" name="username" placeholder="Username" />
                        <input type="email" id="email" name="email" placeholder="Email Address" />
                        <input  type="text" id="phone" name="phone" placeholder="Phone" />
                        <input type="password" id="password" name="password" placeholder="Create Password" />
                        
                        <input type="submit" name="" value="Register" />
                        <p class="signup">
                            Already have an account ?
                            <a href="#" onclick="toggleForm();">Sign in.</a>
                        </p>
                    </form>
                </div>
                <div class="imgBx"><img
                        src="/images/faheemmainlogo.png"
                        alt="" /></div>
            </div>
        </div>
    </section>

    <script>
 function toggleForm() {
    const container = document.querySelector('.container');
    container.classList.toggle('active');
}

document.getElementById('loginForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent the form from submitting normally

    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    fetch('/login', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ username, password })
    })
    .then(response => {
        if (!response.ok) {
            // If the response status is not OK (200-299), throw an error
            return response.json().then(data => {
                throw new Error(data.error || 'An error occurred while logging in.');
            });
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            // Handle successful login
            // For example, redirect to the dashboard or another page
            window.location.href = '/dashboard';
        }
    })
    .catch(error => {
        console.error('Error:', error);
        // Display the error message in the UI
        document.getElementById('errorMessage').textContent = error.message;
    });
});

        </script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</body>
</html>